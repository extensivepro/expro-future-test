# members  
## #461 雇员新增会员成功  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码200，新增成功并返回数据{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },   
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  

***  

## #462 雇员新增会员同时没有shop和merchant  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
新增会员不输入shop和merchant，以：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop":   
  "merchant":   
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  
  
***  

## #464 没有权限新增会员  
### 前置条件  
**服务已经运行，非雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码401，未授权  
  
***  

## #465 雇员新增会员没有code或code已经存在  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
不输入code，以：{  
  "name": "张三",  
  "code":   
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  
* **步骤2：**  
以：{  
  "name": "张三",  
  "code": "23012584",    
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  
* **步骤3：**  
* 再以{  
  "name": "张三",  
  "code": "23012584",    
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  

### 预期结果  
* **预期1：**  
返回代码400，请求参数错误    
* **预期2：**  
返回代码200，新增成功并返回数据{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },   
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  
* **预期3：**  
返回代码400，code已存在  

***  

## #466 雇员新增会员phone错误  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以一个错误的手机号：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "1515421",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码400，手机号错误  
  
***  

## #467 雇员新增会员邮箱格式错误  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以一个错误的电子邮件：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hellocom",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码400，邮箱错误  
  
***  

## #476 雇员新增会员没有name  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
不输入name，以：{  
  "name":   
  "code": "23012584",  
  "male": true,  
  "phone":   
  "email":   
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  

***  

## #463 雇员新增会员同时没有手机号和邮箱  
### 前置条件  
**服务已经运行，雇员身份**  
  
### 操作步骤  
* **步骤1：**  
不输入手机号和邮箱，以：{  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone":   
  "email":   
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51"  
  },  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}，向服务发送新增会员请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  

***  

## #468 业主、雇员查询当前店铺所有会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
不以任何条件，向服务发送一个查询会员请求  

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺所有会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #469 业主、雇员通过会员id查询店铺内会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以会员id：/32445a458b45e，向服务发送查询会员请求  

### 预期结果  
* **预期1：**  
返回代码200，查询成功并返回该会员信息：{  
  "id": "32445a458b45e",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #470 业主、雇员通过会员编码查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?code=23012584，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #470 业主、雇员通过会员编码查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?code=23012584，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #471 业主、雇员通过会员积分查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?{"point":{"$lt":10025}}，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #472 业主、雇员通过会员等级查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?{"level":{"$lt":10}}，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #473 业主、雇员通过会员加入时间查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?{"sinceAt":{"$lt":1366445203233}}，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #474 业主、雇员通过会员到期时间查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?{"dueAt":{"$lt":1366445203233}}，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #475 业主、雇员通过会员状态查询当前店铺会员  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：?status=active，向服务发送一个查询会员请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回所在店铺对应会员信息：[{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}]  

***  

## #476 会员查询自身信息  
### 前置条件  
**服务已经运行，会员身份**  
  
### 操作步骤  
* **步骤1：**  
不以任何条件，向服务发送查询自身信息请求    

### 预期结果  
* **预期1：**  
返回代码200，查询成功返回自己信息：{  
  "id": "2512a52c535e51",  
  "name": "张三",  
  "code": "23012584",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "userID": "2512a52c535e51",  
  "shop": {  
    "shopID": "251235a2c535e51",  
    "name": "北京烤鸭店江宁区分店",  
    "address": "江宁区胜太路99号",  
    "telephone": "02554785214"  
  },  
  "merchant": {  
    "merchantID": "251235a2c535e51",  
    "name": "烤鸭店",  
    "fullName": "北京烤鸭店"  
  },  
  "storedCash": 0,  
  "point": 0,  
  "level": "会员",  
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013,  
  "createdAt": 1366444157013  
}  

***  

## #475 业主、雇员更新会员信息成功  
### 前置条件  
**服务已经运行，业主或雇员身份**  
  
### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三",  
  "male": true,  
  "phone": "15154588756",  
  "email": "hello@qq.com",  
  "idcard": "587452145874569852",  
  "point": 0,  
  "level": "会员",   
  "status": "active",  
  "sinceAt": 1366444157013,  
  "dueAt": 1366444159013  
}，向服务发送更新会员信息请求  

### 预期结果  
* **预期1：**  
返回代码200，更新成功  

***  