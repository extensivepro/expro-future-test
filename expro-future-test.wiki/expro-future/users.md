# Users  
## #242 注册用户成功  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码200，注册成功并有数据返回：  
{  
  "id": "154d4534a48e475",  
  "name": "张三真名",   
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "createdAt": 1367461659852  
}  
  
***  
  
## #239 注册用户电话格式不正确    
### 前置条件  
**服务已经运行**  
  
### 操作步骤  
* **步骤1：**  
以一个错误的电话格式：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "189123457",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，手机号错误  
  
***  

## #240 注册用户电子邮件格式错误  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以一个错误的电子邮件格式：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "189123",  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，电子邮件错误  

***  

## #241 注册用户同时没填手机或电子邮件  
### 前置条件  
**服务已经运行**  
  
### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone":   
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email":   
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  
  
***  

## #243 注册用户username已经存在  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个用户注册请求  
* **步骤2：**  
再以：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码200，注册成功并有数据返回：  
{  
  "id": "154d4534a48e475",  
  "name": "张三真名",   
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "createdAt": 1367461659852  
}  
* **预期2：**  
返回代码400，用户已存在  

***  
  
## #244 注册用户username为空  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username":   
  "password": "123456"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  

***  
  
## #244 注册用户密码格式错误    
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以一个错误的密码格式：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password": "123"  
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  

***  
  
## #244 注册用户未输入密码      
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以一个错误的密码格式：{  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "username": "18912345678",  
  "password":   
}，向服务发送一个用户注册请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误  

***  
   
## #299 用户登录、登出成功  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以：{  
  "username": "18912345678",  
  "password": "123456"  
}，向服务发送一个登录请求  
* **步骤2：**  
向服务发送一个登出请求  
  
### 预期结果  
* **预期1：**  
返回代码200，登录成功  
* **预期2：**  
返回代码200，登出成功

***  
  
## #300 用户登录不输入用户名或输入的用户名不存在  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以一个尚未注册的用户名：{  
  "username": "未注册",  
  "password": "123456"  
}，向服务发送一个登录请求    
  
### 预期结果  
* **预期1：**  
返回代码400，登录失败  

***  
  
## #301 用户登录输入的密码错误或未输入密码  
### 前置条件  
**服务已经运行**  

### 操作步骤  
* **步骤1：**  
以一个错误的密码：{  
  "username": "18912345678",  
  "password": "123"  
}，向服务发送一个登录请求    
  
### 预期结果  
* **预期1：**  
返回代码400，登录失败  

***  
  
## #305 用户更新信息成功  
### 前置条件  
**服务已经运行，用户已经登录**  

### 操作步骤  
* **步骤1：**  
以：{  
  "password": "123456",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "email": "18912345678@189.cn",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求
  
### 预期结果  
* **预期1：**  
返回代码200，更新成功  

***  

## #307 未登录用户更新信息  
### 前置条件  
**服务已经运行，用户未登录**  

### 操作步骤  
* **步骤1：**  
以：{  
  "password": "123456",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "email": "18912345678@189.cn",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求
  
### 预期结果  
* **预期1：**  
返回代码401，未授权  

***  

## #306 当前用户更新其他用户信息  
### 前置条件  
**服务已经运行，用户已经登录**  

### 操作步骤  
* **步骤1：**  
以：{  
  "password": "123456",  
  "name": "阿瞒",  
  "displayName": "曹操",  
  "phone": "1891234578",  
  "email": "18912345678@189.cn",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求  
（注：以上信息为他人信息，而非当前用户自身信息）
  
### 预期结果  
* **预期1：**  
返回代码401，未授权  

***  

## #309 更新用户信息手机号格式错误  
### 前置条件  
**服务已经运行，用户已经登录**  

### 操作步骤  
* **步骤1：**  
以一个错误的手机格式：{  
  "password": "123456",  
  "name": "阿瞒",  
  "displayName": "曹操",  
  "phone": "189123457",  
  "email": "18912345678@189.cn",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求  
  
### 预期结果  
* **预期1：**  
返回代码400，请求参数错误    

***  

## #311 更新用户信息邮箱格式错误    
### 前置条件  
**服务已经运行，用户已经登录**  

### 操作步骤  
* **步骤1：**  
以一个错误的电子邮件：{  
  "password": "123456",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "email": "18912345678n",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求
  
### 预期结果  
* **预期1：**  
返回代码400，电子邮件错误  

***  

## #310 更新用户信息密码错误    
### 前置条件  
**服务已经运行，用户已经登录**  

### 操作步骤  
* **步骤1：**  
以一个错误的密码格式：{  
  "password": "123",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "email": "18912345678@189.cn",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101"  
}，向服务发送一个更新用户信息请求
  
### 预期结果  
* **预期1：**  
返回代码400，电子邮件错误  

***  
  
## #357 未登录用户查询用户信息  
### 前置条件  
**服务已经运行，用户未登录**  
  
### 操作步骤  
* **步骤1：**  
以一个用户id为路由，向服务发送一个查询用户信息请求  
    
### 预期结果  
* **预期1：**  
返回代码401，未授权  

***  

## #358 当前用户查询其他用户信息  
### 前置条件  
**服务已经运行，用户已经登录**  
  
### 操作步骤  
* **步骤1：**  
以他人的用户id为路由，向服务发送一个查询用户信息请求  
    
### 预期结果  
* **预期1：**  
返回代码401，未授权  

***  

## #359 以id查询一个用户信息成功  
### 前置条件  
**服务已经运行，用户本人或泛商会管理员会或内部调用**  
  
### 操作步骤  
* **步骤1：**  
以用户id为路由，向服务发送一个查询用户信息请求  
（注：若是用户本人查询，只能根据自己id查询）  
    
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}    

***  

## #361 通过用户名称查询用户信息  
### 前置条件  
**服务已经运行，管理员身份**  

### 操作步骤  
* **步骤1：**  
以：?name=张三真名，向服务发送一个查询用户信息请求  
* **步骤2：**  
以一个不存在的用户名：?name=ccc,向服务发送一个查询用户信息请求  
  
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回：  
[{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}]  
* **预期2：**  
返回代码200，查询成功，但无数据返回  

***  

## #362 通过用户手机号码查询用户信息  
### 前置条件  
**服务已经运行，管理员身份**  

### 操作步骤  
* **步骤1：**  
以：?phone=18912345678，向服务发送一个查询用户信息请求  
* **步骤2：**  
以一个不存在的手机号码：?phone=189,向服务发送一个查询用户信息请求  
  
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回：  
[{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}]  
* **预期2：**  
返回代码200，查询成功，但无数据返回  

***  

## #363 通过用户身份证号查询用户信息  
### 前置条件  
**服务已经运行，管理员身份**  

### 操作步骤  
* **步骤1：**  
以：?idcard=320123199005123210，向服务发送一个查询用户信息请求  
* **步骤2：**  
以一个不存在的身份证号码：?idcard=32012319900,向服务发送一个查询用户信息请求  
  
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回：  
[{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}]  
* **预期2：**  
返回代码200，查询成功，但无数据返回  

***  

## #364 通过用户注册时间查询用户信息  
### 前置条件  
**服务已经运行，管理员身份**  

### 操作步骤  
* **步骤1：**  
以：?{"createdAt":{"$gt":1000}}，向服务发送一个查询用户信息请求  
* **步骤2：**  
以一个不存在的注册时间：?{"createdAt":{"$gt":00}},向服务发送一个查询用户信息请求  
  
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回：  
[{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}]  
* **预期2：**  
返回代码200，查询成功，但无数据返回  

***  

## #365 查询全部用户信息  
### 前置条件  
**服务已经运行，管理员身份**  

### 操作步骤  
* **步骤1：**  
不输入任何条件，向服务发送一个查询用户信息请求    
    
### 预期结果  
* **预期1：**  
返回代码200，查询成功并有数据返回：  
[{  
  "id": "154d4534a48e475",  
  "username": "18912345678",  
  "name": "张三真名",  
  "displayName": "张业主",  
  "phone": "1891234578",  
  "idcard": "320103197901011234",  
  "male": true,  
  "birthday": "19790101",  
  "email": "18912345678@189.cn",  
  "roles": ["user"]  
}]  

***  



